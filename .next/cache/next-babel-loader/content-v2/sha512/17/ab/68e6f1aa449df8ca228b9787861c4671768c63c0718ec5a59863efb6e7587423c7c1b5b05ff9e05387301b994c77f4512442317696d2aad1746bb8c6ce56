{"ast":null,"code":"var _jsxFileName = \"/Users/roberthawker/Desktop/MovieMongoose 2/pages/[id]/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport dbConnect from '../../utils/dbConnect';\nimport Movie from '../../models/Movie';\n/* Allows you to view pet card info and delete pet card*/\n\nconst MoviePage = ({\n  movie\n}) => {\n  const router = useRouter();\n  const {\n    0: message,\n    1: setMessage\n  } = useState('');\n\n  const handleDelete = async () => {\n    const movieID = router.query.id;\n\n    try {\n      await fetch(`/api/movies/${movieID}`, {\n        method: 'Delete'\n      });\n      router.push('/');\n    } catch (error) {\n      setMessage('Failed to delete the movie.');\n    }\n  };\n\n  return __jsx(\"div\", {\n    key: movie._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }, __jsx(\"img\", {\n    src: movie.poster,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }), __jsx(\"h5\", {\n    className: \"movie-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, movie.title), __jsx(\"div\", {\n    className: \"main-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"btn-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: \"/[id]/edit\",\n    as: `/${movie._id}/edit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    className: \"btn edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 15\n    }\n  }, \"Edit\")), __jsx(\"button\", {\n    className: \"btn delete\",\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }\n  }, \"Delete\")))), message && __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 19\n    }\n  }, message));\n};\n\nexport async function getServerSideProps({\n  params\n}) {\n  await dbConnect();\n  const movie = await Movie.findById(params.id).lean();\n  movie._id = movie._id.toString();\n  return {\n    props: {\n      movie\n    }\n  };\n}\nexport default MoviePage;","map":{"version":3,"sources":["/Users/roberthawker/Desktop/MovieMongoose 2/pages/[id]/index.js"],"names":["useState","useRouter","Link","dbConnect","Movie","MoviePage","movie","router","message","setMessage","handleDelete","movieID","query","id","fetch","method","push","error","_id","poster","title","getServerSideProps","params","findById","lean","toString","props"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAEA;;AACA,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAC/B,QAAMC,MAAM,GAAGN,SAAS,EAAxB;AACA,QAAM;AAAA,OAACO,OAAD;AAAA,OAAUC;AAAV,MAAwBT,QAAQ,CAAC,EAAD,CAAtC;;AACA,QAAMU,YAAY,GAAG,YAAY;AAC/B,UAAMC,OAAO,GAAGJ,MAAM,CAACK,KAAP,CAAaC,EAA7B;;AAEA,QAAI;AACF,YAAMC,KAAK,CAAE,eAAcH,OAAQ,EAAxB,EAA2B;AACpCI,QAAAA,MAAM,EAAE;AAD4B,OAA3B,CAAX;AAGAR,MAAAA,MAAM,CAACS,IAAP,CAAY,GAAZ;AACD,KALD,CAKE,OAAOC,KAAP,EAAc;AACdR,MAAAA,UAAU,CAAC,6BAAD,CAAV;AACD;AACF,GAXD;;AAaA,SACE;AAAK,IAAA,GAAG,EAAEH,KAAK,CAACY,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,GAAG,EAAEZ,KAAK,CAACa,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4Bb,KAAK,CAACc,KAAlC,CAFF,EAGE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,YAAX;AAAwB,IAAA,EAAE,EAAG,IAAGd,KAAK,CAACY,GAAI,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAQ,IAAA,SAAS,EAAC,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADF,EAIE;AAAQ,IAAA,SAAS,EAAC,YAAlB;AAA+B,IAAA,OAAO,EAAER,YAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,CADF,CAHF,CADF,EAeGF,OAAO,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,OAAJ,CAfd,CADF;AAmBD,CAnCD;;AAqCA,OAAO,eAAea,kBAAf,CAAkC;AAAEC,EAAAA;AAAF,CAAlC,EAA8C;AACnD,QAAMnB,SAAS,EAAf;AAEA,QAAMG,KAAK,GAAG,MAAMF,KAAK,CAACmB,QAAN,CAAeD,MAAM,CAACT,EAAtB,EAA0BW,IAA1B,EAApB;AACAlB,EAAAA,KAAK,CAACY,GAAN,GAAYZ,KAAK,CAACY,GAAN,CAAUO,QAAV,EAAZ;AAEA,SAAO;AAAEC,IAAAA,KAAK,EAAE;AAAEpB,MAAAA;AAAF;AAAT,GAAP;AACD;AAED,eAAeD,SAAf","sourcesContent":["import { useState } from 'react'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport dbConnect from '../../utils/dbConnect'\nimport Movie from '../../models/Movie'\n\n/* Allows you to view pet card info and delete pet card*/\nconst MoviePage = ({ movie }) => {\n  const router = useRouter()\n  const [message, setMessage] = useState('')\n  const handleDelete = async () => {\n    const movieID = router.query.id\n\n    try {\n      await fetch(`/api/movies/${movieID}`, {\n        method: 'Delete',\n      })\n      router.push('/')\n    } catch (error) {\n      setMessage('Failed to delete the movie.')\n    }\n  }\n\n  return (\n    <div key={movie._id}>\n      <div className=\"card\">\n        <img src={movie.poster} />\n        <h5 className=\"movie-name\">{movie.title}</h5>\n        <div className=\"main-content\">\n          <div className=\"btn-container\">\n            <Link href=\"/[id]/edit\" as={`/${movie._id}/edit`}>\n              <button className=\"btn edit\">Edit</button>\n            </Link>\n            <button className=\"btn delete\" onClick={handleDelete}>\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n      {message && <p>{message}</p>}\n    </div>\n  )\n}\n\nexport async function getServerSideProps({ params }) {\n  await dbConnect()\n\n  const movie = await Movie.findById(params.id).lean()\n  movie._id = movie._id.toString()\n\n  return { props: { movie } }\n}\n\nexport default MoviePage\n"]},"metadata":{},"sourceType":"module"}