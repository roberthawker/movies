{"ast":null,"code":"import _regeneratorRuntime from \"/Users/roberthawker/Desktop/moods/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/roberthawker/Desktop/moods/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/roberthawker/Desktop/moods/pages/[id]/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\n\n/* Allows you to view pet card info and delete pet card*/\nvar PetPage = function PetPage(_ref) {\n  _s();\n\n  var pet = _ref.pet;\n  var router = useRouter();\n\n  var _useState = useState(''),\n      message = _useState[0],\n      setMessage = _useState[1];\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var petID;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              petID = router.query.id;\n              _context.prev = 1;\n              _context.next = 4;\n              return fetch(\"/api/pets/\".concat(petID), {\n                method: 'Delete'\n              });\n\n            case 4:\n              router.push('/');\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](1);\n              setMessage('Failed to delete the pet.');\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 7]]);\n    }));\n\n    return function handleDelete() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    key: pet._id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }, __jsx(\"img\", {\n    src: pet.image_url,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }), __jsx(\"h5\", {\n    className: \"pet-name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, pet.name), __jsx(\"div\", {\n    className: \"main-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    className: \"pet-name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 11\n    }\n  }, pet.name), __jsx(\"p\", {\n    className: \"owner\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 11\n    }\n  }, \"Owner: \", pet.owner_name), __jsx(\"div\", {\n    className: \"likes info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: \"label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, \"Likes\"), __jsx(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, pet.likes.map(function (data, index) {\n    return __jsx(\"li\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }\n    }, data, \" \");\n  }))), __jsx(\"div\", {\n    className: \"dislikes info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: \"label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, \"Dislikes\"), __jsx(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, pet.dislikes.map(function (data, index) {\n    return __jsx(\"li\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }, data, \" \");\n  }))), __jsx(\"div\", {\n    className: \"btn-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: \"/[id]/edit\",\n    as: \"/\".concat(pet._id, \"/edit\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    className: \"btn edit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }\n  }, \"Edit\")), __jsx(\"button\", {\n    className: \"btn delete\",\n    onClick: handleDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, \"Delete\")))), message && __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }\n  }, message));\n};\n\n_s(PetPage, \"yha2Cnt8BZfMf3P0rpE2Zd8Ea6g=\", false, function () {\n  return [useRouter];\n});\n\n_c = PetPage;\nexport var __N_SSP = true;\nexport default PetPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"PetPage\");","map":{"version":3,"sources":["/Users/roberthawker/Desktop/moods/pages/[id]/index.js"],"names":["useState","useRouter","Link","PetPage","pet","router","message","setMessage","handleDelete","petID","query","id","fetch","method","push","_id","image_url","name","owner_name","likes","map","data","index","dislikes"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport dbConnect from '../../utils/dbConnect'\nimport Pet from '../../models/Pet'\n\n/* Allows you to view pet card info and delete pet card*/\nconst PetPage = ({ pet }) => {\n  const router = useRouter()\n  const [message, setMessage] = useState('')\n  const handleDelete = async () => {\n    const petID = router.query.id\n\n    try {\n      await fetch(`/api/pets/${petID}`, {\n        method: 'Delete',\n      })\n      router.push('/')\n    } catch (error) {\n      setMessage('Failed to delete the pet.')\n    }\n  }\n\n  return (\n    <div key={pet._id}>\n      <div className=\"card\">\n        <img src={pet.image_url} />\n        <h5 className=\"pet-name\">{pet.name}</h5>\n        <div className=\"main-content\">\n          <p className=\"pet-name\">{pet.name}</p>\n          <p className=\"owner\">Owner: {pet.owner_name}</p>\n\n          {/* Extra Pet Info: Likes and Dislikes */}\n          <div className=\"likes info\">\n            <p className=\"label\">Likes</p>\n            <ul>\n              {pet.likes.map((data, index) => (\n                <li key={index}>{data} </li>\n              ))}\n            </ul>\n          </div>\n          <div className=\"dislikes info\">\n            <p className=\"label\">Dislikes</p>\n            <ul>\n              {pet.dislikes.map((data, index) => (\n                <li key={index}>{data} </li>\n              ))}\n            </ul>\n          </div>\n\n          <div className=\"btn-container\">\n            <Link href=\"/[id]/edit\" as={`/${pet._id}/edit`}>\n              <button className=\"btn edit\">Edit</button>\n            </Link>\n            <button className=\"btn delete\" onClick={handleDelete}>\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n      {message && <p>{message}</p>}\n    </div>\n  )\n}\n\nexport async function getServerSideProps({ params }) {\n  await dbConnect()\n\n  const pet = await Pet.findById(params.id).lean()\n  pet._id = pet._id.toString()\n\n  return { props: { pet } }\n}\n\nexport default PetPage\n"]},"metadata":{},"sourceType":"module"}